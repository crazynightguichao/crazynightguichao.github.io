<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue | 月下独酌</title>
    <meta name="description" content="Welcome to my personal site">
    
    
    <link rel="preload" href="/assets/css/0.styles.6aaa91c1.css" as="style"><link rel="preload" href="/assets/js/app.38071572.js" as="script"><link rel="preload" href="/assets/js/11.56ab5a22.js" as="script"><link rel="prefetch" href="/assets/js/10.94da10b1.js"><link rel="prefetch" href="/assets/js/12.816a1587.js"><link rel="prefetch" href="/assets/js/13.5b71f8b5.js"><link rel="prefetch" href="/assets/js/14.5d62c483.js"><link rel="prefetch" href="/assets/js/15.71f4a6cb.js"><link rel="prefetch" href="/assets/js/2.ce1608e6.js"><link rel="prefetch" href="/assets/js/3.7f8423ba.js"><link rel="prefetch" href="/assets/js/4.09dc507d.js"><link rel="prefetch" href="/assets/js/5.b11ebe49.js"><link rel="prefetch" href="/assets/js/6.6ce78cbf.js"><link rel="prefetch" href="/assets/js/7.3ef676a3.js"><link rel="prefetch" href="/assets/js/8.6047b5e7.js"><link rel="prefetch" href="/assets/js/9.01e23169.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6aaa91c1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo.png" alt="月下独酌" class="logo"> <span class="site-name can-hide">月下独酌</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accumulate/" class="nav-link">知识库</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/js基础.html" class="nav-link">JS基础</a></li><li class="dropdown-item"><!----> <a href="/interview/HTML.html" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/interview/CSS.html" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/interview/vue.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">Vue</a></li><li class="dropdown-item"><!----> <a href="/interview/浏览器.html" class="nav-link">浏览器</a></li><li class="dropdown-item"><!----> <a href="/interview/性能.html" class="nav-link">性能</a></li><li class="dropdown-item"><!----> <a href="/interview/HTTP.html" class="nav-link">HTTP</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/" class="nav-link">作品案例</a></div><div class="nav-item"><a href="/others/" class="nav-link">诗和远方</a></div><div class="nav-item"><a href="/guide.html" class="nav-link">VuePress</a></div><div class="nav-item"><a href="https://github.com/crazynightguichao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accumulate/" class="nav-link">知识库</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/js基础.html" class="nav-link">JS基础</a></li><li class="dropdown-item"><!----> <a href="/interview/HTML.html" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/interview/CSS.html" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/interview/vue.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">Vue</a></li><li class="dropdown-item"><!----> <a href="/interview/浏览器.html" class="nav-link">浏览器</a></li><li class="dropdown-item"><!----> <a href="/interview/性能.html" class="nav-link">性能</a></li><li class="dropdown-item"><!----> <a href="/interview/HTTP.html" class="nav-link">HTTP</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/" class="nav-link">作品案例</a></div><div class="nav-item"><a href="/others/" class="nav-link">诗和远方</a></div><div class="nav-item"><a href="/guide.html" class="nav-link">VuePress</a></div><div class="nav-item"><a href="https://github.com/crazynightguichao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Vue</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/interview/vue.html#vue" class="sidebar-link">Vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/vue.html#一、-vue3带来的新特性" class="sidebar-link">一、 vue3带来的新特性</a></li><li class="sidebar-sub-header"><a href="/interview/vue.html#二、vue的组件data为什么必须是一个函数" class="sidebar-link">二、Vue的组件data为什么必须是一个函数?</a></li><li class="sidebar-sub-header"><a href="/interview/vue.html#三、谈谈vue的性能优化有哪些？" class="sidebar-link">三、谈谈Vue的性能优化有哪些？</a></li><li class="sidebar-sub-header"><a href="/interview/vue.html#四、vue中使用了哪些设计模式？" class="sidebar-link">四、vue中使用了哪些设计模式？</a></li><li class="sidebar-sub-header"><a href="/interview/vue.html#五、说一说keep-alive实现原理" class="sidebar-link">五、说一说keep-alive实现原理</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="vue"><a href="#vue" class="header-anchor">#</a> Vue</h2> <h3 id="一、-vue3带来的新特性"><a href="#一、-vue3带来的新特性" class="header-anchor">#</a> 一、 vue3带来的新特性</h3> <p><strong>1. 压缩包体积更小</strong></p> <ul><li>当前最小化并被压缩的 Vue 运行时大小约为 20kB（2.6.10 版为 22.8kB）。Vue 3.0捆绑包的大小大约会减少一半，即只有10kB！</li></ul> <p><strong>2. Object.defineProperty -&gt; Proxy</strong></p> <ul><li>Object.defineProperty是一个相对比较昂贵的操作，因为它直接操作对象的属性，颗粒度比较小。将它替换为es6的Proxy，在目标对象之上架了一层拦截，代理的是对象而不是对象的属性。这样可以将原本对对象属性的操作变为对整个对象的操作，颗粒度变大。</li> <li>javascript引擎在解析的时候希望对象的结构越稳定越好，如果对象一直在变，可优化性降低，proxy不需要对原始对象做太多操作。</li></ul> <p><strong>3. Virtual DOM 重构</strong></p> <p>vdom的本质是一个抽象层，用javascript描述界面渲染成什么样子。react用jsx，没办法检测出可以优化的动态代码，所以做时间分片，vue中足够快的话可以不用时间分片</p> <p><strong>4. Performance</strong>
vue3在性能方面比vue2快了2倍。</p> <ul><li>重写了虚拟DOM的实现</li> <li>运行时编译</li> <li>update性能提高</li> <li>SSR速度提高</li></ul> <p><strong>5. Tree-shaking support</strong></p> <p>vue3中的核心api都支持了tree-shaking，这些api都是通过包引入的方式而不是直接在实例化时就注入，只会对使用到的功能或特性进行打包（按需打包），这意味着更多的功能和更小的体积。</p> <p><strong>6. Composition API</strong></p> <p>vue2中，我们一般会采用mixin来复用逻辑代码，用倒是挺好用的，不过也存在一些问题：例如代码来源不清晰、方法属性等冲突。基于此在vue3中引入了Composition API（组合API），使用纯函数分隔复用代码。和React中的hooks的概念很相似</p> <p><strong>7. 新增的三个组件Fragment、Teleport、Suspense</strong></p> <p><strong>Fragment</strong></p> <p>在书写vue2时，由于组件必须只有一个根节点，很多时候会添加一些没有意义的节点用于包裹。Fragment组件就是用于解决这个问题的（这和React中的Fragment组件是一样的）。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;!-- 这意味着现在可以这样写组件了。 --&gt;
/* App.vue */
&lt;template&gt;
  &lt;header&gt;...&lt;/header&gt;
  &lt;main v-bind=&quot;$attrs&quot;&gt;...&lt;/main&gt;
  &lt;footer&gt;...&lt;/footer&gt;
&lt;/template&gt;

&lt;script&gt;
export default {};
&lt;/script&gt;

&lt;!-- 或者这样 --&gt;
// app.js
import { defineComponent, h, Fragment } from 'vue';

export default defineComponent({
    render() {
        return h(Fragment, {}, [
            h('header', {}, ['...']),
            h('main', {}, ['...']),
            h('footer', {}, ['...']),
        ]);
    }
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><strong>Teleport</strong></p> <p>Teleport其实就是React中的Portal。Portal 提供了一种将子节点渲染到存在于父组件以外的 DOM 节点的优秀的方案。<br>
一个 portal 的典型用例是当父组件有 overflow: hidden 或 z-index 样式时，但你需要子组件能够在视觉上“跳出”其容器。例如，对话框、悬浮卡以及提示框。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/* App.vue */
&lt;template&gt;
    &lt;div&gt;123&lt;/div&gt;
    &lt;Teleport to=&quot;#container&quot;&gt;
        Teleport
    &lt;/Teleport&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineComponent } from &quot;vue&quot;;

export default defineComponent({
    setup() {}
});
&lt;/script&gt;

/* index.html */
&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;container&quot;&gt;&lt;/div&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>Suspense</strong></p> <p>同样的，这和React中的Supense是一样的。<br>
Suspense 让你的组件在渲染之前进行“等待”，并在等待时显示 fallback 的内容</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// App.vue
&lt;template&gt;
    &lt;Suspense&gt;
        &lt;template #default&gt;
            &lt;AsyncComponent /&gt;
        &lt;/template&gt;
        &lt;template #fallback&gt;
            Loading...
        &lt;/template&gt;
    &lt;/Suspense&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot;&gt;
import { defineComponent } from &quot;vue&quot;;
import AsyncComponent from './AsyncComponent.vue';

export default defineComponent({
    name: &quot;App&quot;,
    
    components: {
        AsyncComponent
    }
});
&lt;/script&gt;

// AsyncComponent.vue
&lt;template&gt;
    &lt;div&gt;Async Component&lt;/div&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot;&gt;
import { defineComponent } from &quot;vue&quot;;

const sleep = () =&gt; {
    return new Promise(resolve =&gt; setTimeout(resolve, 1000));
};

export default defineComponent({
    async setup() {
        await sleep();
    }
});
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p><strong>8. Better TypeScript support</strong></p> <p>在vue2中使用过TypesScript的童鞋应该有过体会，写起来实在是有点难受。vue3则是使用ts进行了重写，开发者使用vue3时拥有更好的类型支持和更好的编写体验。</p> <h3 id="二、vue的组件data为什么必须是一个函数"><a href="#二、vue的组件data为什么必须是一个函数" class="header-anchor">#</a> 二、Vue的组件data为什么必须是一个函数?</h3> <p>new Vue是一个单例模式，不会有任何的合并操作，所以根实例不必校验data一定是一个函数。
组件的data必须是一个函数，是为了防止两个组件的数据产生污染。
如果都是对象的话，会在合并的时候，指向同一个地址。
而如果是函数的时候，合并的时候调用，会产生两个空间。</p> <h3 id="三、谈谈vue的性能优化有哪些？"><a href="#三、谈谈vue的性能优化有哪些？" class="header-anchor">#</a> 三、谈谈Vue的性能优化有哪些？</h3> <ul><li>数据层级不要过深，合理的设置响应式数据</li> <li>使用数据时，缓存值的结果，不频繁取值</li> <li>合理设置key</li> <li>v-show(频繁切换性能高)和v-if的合理使用</li> <li>控制组件的粒度 -&gt; Vue采用组件级别更新</li> <li>采用函数式组件 -&gt; 函数式组价开销低</li> <li>采用异步组件 -&gt; 借助webpack的分包策略</li> <li>使用keep-alive来缓存组件</li> <li>虚拟滚动、时间分片等策略</li> <li>打包优化</li></ul> <h3 id="四、vue中使用了哪些设计模式？"><a href="#四、vue中使用了哪些设计模式？" class="header-anchor">#</a> 四、vue中使用了哪些设计模式？</h3> <ul><li>单例模式：new多次，只有一个实例</li> <li>工场模式：传入参数就可以创建实例（虚拟节点的创建）</li> <li>发布订阅模式：eventBus</li> <li>观察者模式：watch和dep</li> <li>代理模式：_data属性、proxy、防抖、节流</li> <li>中介者模式：vuex</li> <li>策略模式</li> <li>外观模式</li></ul> <h3 id="五、说一说keep-alive实现原理"><a href="#五、说一说keep-alive实现原理" class="header-anchor">#</a> 五、说一说keep-alive实现原理</h3> <div class="tip custom-block"><p class="custom-block-title">keep-alive</p> <p>keep-alive组件接受三个属性参数：include、exclude、max</p></div> <ul><li>include 指定需要缓存的组件name集合，参数格式支持String, RegExp, Array。当为字符串的时候，多个组件名称以逗号隔开。</li> <li>exclude 指定不需要缓存的组件name集合，参数格式和include一样。</li> <li>max 指定最多可缓存组件的数量,超过数量删除第一个。参数格式支持String、Number。</li></ul> <h4 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h4> <ul><li>keep-alive实例会缓存对应组件的VNode,如果命中缓存，直接从缓存对象返回对应VNode</li> <li>LRU（Least recently used） 算法根据数据的历史访问记录来进行淘汰数据，其核心思想是“如果数据最近被访问过，那么将来被访问的几率也更高”。(墨菲定律：越担心的事情越会发生)</li></ul></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.38071572.js" defer></script><script src="/assets/js/11.56ab5a22.js" defer></script>
  </body>
</html>
